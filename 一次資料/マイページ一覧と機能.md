# EvoX システム マイページ一覧と機能

## 📱 マイページ（認証済みユーザー向け）

### 🔐 認証関連画面

#### **1. ユーザー登録画面** (`/entry`)
- **機能**: 新規ユーザーの登録
- **登録フロー**:
  - 電話番号入力
  - SMS認証コード確認
  - パスワード設定
  - ニックネーム設定
- **セキュリティ**: 重複登録防止、SMS認証

#### **2. ユーザーログイン画面** (`/login`)
- **機能**: 既存ユーザーのログイン
- **認証方式**:
  - 電話番号・パスワード認証
  - Laravel Sanctumトークン認証
- **セキュリティ**: セッション管理、CSRF保護

#### **3. パスワードリセット画面** (`/forgot-password`)
- **機能**: パスワードを忘れた場合のリセット
- **リセットフロー**:
  - 電話番号入力
  - SMS認証コード確認
  - 新しいパスワード設定

### 🎮 メイン機能画面

#### **4. マイページ** (`/mypage`)
- **機能**: ユーザーのメインダッシュボード
- **表示内容**:
  - ユーザー情報（ニックネーム、ポイント）
  - 使用履歴（QRコード使用履歴）
  - 最新ニュース
  - クイックアクション（QRスキャン、ペンライト）
- **機能**: プロフィール編集、設定変更

#### **5. QRコードスキャン画面** (`/qr-scanner`)
- **機能**: QRコードの読み取り・処理
- **読み取り方式**:
  - カメラ読み取り（リアルタイム）
  - 画像アップロード
- **処理フロー**:
  - QRコード読み取り
  - サーバーでの検証
  - オプション選択（ゲームグッズの場合）
  - 結果表示
- **機能**: 自動カメラ開始、タッチ対応

#### **6. QRオプション選択画面** (`/qr-options-selection`)
- **機能**: ゲームグッズQRのオプション選択
- **選択項目**:
  - アバター表情（5種類）
  - アバター行動（5種類）
  - 背景色（5種類）
  - エフェクト（5種類）
  - サウンド（5種類）
- **機能**: 動的選択肢、プレビュー表示

#### **7. QR結果表示画面** (`/qr-result`)
- **機能**: QRコード処理結果の表示
- **表示内容**:
  - 獲得ポイント
  - 選択したオプション（ゲームグッズの場合）
  - イベント情報（ライブイベントの場合）
  - 処理時刻
- **機能**: 別のQRスキャン、マイページへの導線

#### **8. ペンライトモード画面** (`/penlight-mode`)
- **機能**: スマホ画面をペンライトとして使用
- **基本機能**:
  - 色選択（8色パレット、アーティストカラー）
  - パターン選択（単色、点滅、フェード、波紋、虹色、パルス）
  - 明度調整
  - 全画面モード
- **トリガー機能**:
  - 手動モード（タッチ操作）
  - 音声モード（音声レベル検出）
  - 映像モード（モーション検出）
  - 音声+映像モード（組み合わせ）
- **連動機能**:
  - 音声連動（Web Audio API）
  - サーバー制御（管理者による一括制御）
  - 曲別プリセット（事前配信・タイミング制御）
- **バッテリー節約機能**:
  - 上3分の1エリアのみ描画
  - 描画エリアガイド表示
  - バッテリー消費削減
- **機能**: タッチ対応、リアルタイム処理

#### **9. ペンライト同期画面** (`/penlight-sync`)
- **機能**: 複数ユーザーのペンライト同期
- **同期機能**:
  - ルーム参加/退出
  - 参加者一覧表示
  - 同期パターン選択
  - リアルタイム同期
- **機能**: WebSocketシミュレーション、ルーム管理

### 🎨 カスタマイズ画面

#### **10. キャラクター選択画面** (`/character-selection`)
- **機能**: アバターキャラクターの選択
- **選択内容**:
  - キャラクタータイプ
  - 初期設定
- **機能**: プレビュー表示、確定処理

#### **11. ニックネーム設定画面** (`/nickname-setup`)
- **機能**: ユーザーニックネームの設定
- **設定項目**:
  - ニックネーム入力
  - 重複チェック
- **機能**: リアルタイム検証、確定処理

---

## 🔧 マイページ技術仕様

### フロントエンド技術
- **フレームワーク**: Vue.js 3 + Vite
- **UIライブラリ**: Tailwind CSS
- **状態管理**: Vue Composition API
- **ルーティング**: Vue Router 4
- **HTTP通信**: Axios
- **音声処理**: Web Audio API
- **映像処理**: Canvas API
- **QR読み取り**: @zxing/library

### バックエンド技術
- **フレームワーク**: Laravel 10.x
- **データベース**: PostgreSQL
- **認証**: Laravel Sanctum + セッション
- **QR生成**: endroid/qr-code 6.x
- **SMS**: Twilio等のSMSサービス
- **キャッシュ**: Laravel Cache

### セキュリティ機能
- **認証**: SMS OTP認証、セッション管理
- **保護**: CSRF保護、XSS対策
- **通信**: HTTPS通信
- **データ**: SQLインジェクション対策

---

## 📊 マイページの特徴

### QRコード機能
- **ライブイベント**: 標準的なQRコード（ポイント付与、使用履歴）
- **ゲームグッズ**: オプション機能付き（カスタマイズ要素選択）
- **カメラ読み取り**: リアルタイムQRコードスキャン
- **画像アップロード**: 保存したQRコード画像から読み取り

### ペンライト機能
- **トリガーモード**: 手動・音声・映像・音声+映像の4モード
- **音声連動**: Web Audio APIによるリアルタイム音声分析
- **映像検出**: カメラ映像のモーション検出
- **サーバー制御**: 管理者による一括制御
- **曲別プリセット**: 事前配信・タイミング制御
- **バッテリー節約**: 上3分の1エリアのみ描画

### ユーザー体験機能
- **マイページ**: 個人情報・使用履歴・最新ニュース
- **クイックアクション**: QRスキャン・ペンライトへの素早いアクセス
- **プロフィール管理**: ニックネーム・キャラクター設定
- **使用履歴**: QRコード使用履歴の表示

---

## 📊 画面遷移フロー

### ユーザー登録フロー
```
ユーザー登録 → SMS認証 → パスワード設定 → キャラクター選択 → ニックネーム設定 → マイページ
```

### QRコード使用フロー
```
マイページ → QRスキャン → (オプション選択) → 結果表示 → マイページ
```

### ペンライト使用フロー
```
マイページ → ペンライトモード → (同期モード) → マイページ
```

### パスワードリセットフロー
```
パスワードリセット → SMS認証 → 新しいパスワード設定 → マイページ
```

---

## 🎯 主要機能の特徴

### QRコード機能
- **リアルタイム読み取り**: カメラによる即座のQRコード読み取り
- **オプション選択**: ゲームグッズでの5種類のカスタマイズ要素
- **結果表示**: 詳細な結果画面でのポイント・オプション表示
- **履歴管理**: 使用履歴の自動記録・表示

### ペンライト機能
- **4つのトリガーモード**: 手動・音声・映像・音声+映像
- **音声連動**: 音楽のビート・歓声・アーティストの声に反応
- **映像検出**: ステージの動き・照明の変化・観客の動きに反応
- **バッテリー節約**: 上3分の1エリアのみ描画で消費削減
- **同期機能**: 複数ユーザーのペンライト同期

### ユーザー管理機能
- **個人情報**: ニックネーム・キャラクター・ポイント管理
- **使用履歴**: QRコード使用履歴の詳細表示
- **ニュース表示**: 最新ニュースの表示
- **設定管理**: 個人設定の変更・管理

このマイページは、ユーザーがEvoXシステムの主要機能を活用するための中心的なインターフェースとして設計されています。
